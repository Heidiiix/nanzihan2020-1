<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>nanzihan2020 ç”·å­æ¼¢æ¼¬æ–™æœ¬èˆ–</title>
    <style>
        :root {
            --bg-color: #051221;
            --card-bg: #102a43;
            --item-bg: #1a365d;
            --gold: #d4af37;
            --sage: #9caf88;
            --text-main: #f0f4f8;
            --text-sub: #8492a6;
            --white: #ffffff;
            --alert-red: #8b0000;
            --font-en: "Constantia", serif;
        }

        body {
            font-family: var(--font-en), "PingFang TC", "Heiti TC", sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0; padding: 15px;
            display: flex; flex-direction: column; align-items: center;
            -webkit-tap-highlight-color: transparent;
        }

        .container { width: 100%; max-width: 500px; }
        h1 { text-align: center; font-size: 1.6rem; color: var(--white); margin-bottom: 5px; letter-spacing: 2px; }
        .brand-sub { text-align: center; font-size: 0.9rem; color: var(--text-sub); margin-bottom: 30px; letter-spacing: 4px; }

        .category-title {
            font-size: 1rem; border-left: 3px solid var(--gold);
            padding-left: 12px; margin: 35px 0 15px 0;
            color: var(--gold); font-weight: bold;
        }

        /* å•†å“æŒ‰éˆ• */
        .product-row {
            display: flex; align-items: center; background: var(--item-bg);
            border: 1px solid #2d4a6d; border-radius: 10px; padding: 15px;
            margin-bottom: 12px;
        }

        .product-info { flex: 1; cursor: pointer; }
        .slogan { font-size: 0.75rem; color: var(--sage); margin-bottom: 4px; display: block; font-style: italic; }
        .item-name { font-size: 1.05rem; font-weight: 500; color: var(--text-main); display: block; }
        .item-en { font-size: 0.8rem; color: var(--text-sub); display: block; margin-bottom: 4px; }
        .price { font-size: 1.1rem; font-weight: bold; color: var(--gold); display: block; }

        /* é™å®šç‹€æ…‹ */
        .status-gray { filter: grayscale(1); opacity: 0.5; pointer-events: none; }
        .status-newyear { background: var(--alert-red) !important; border-color: #ff4d4d; pointer-events: none; }
        .limit-tag { color: #ffcccc; font-size: 0.8rem; font-weight: bold; margin-top: 5px; display: block; }

        /* æ•¸é‡æ§åˆ¶ */
        .qty-ctrl {
            display: flex; align-items: center; background: rgba(0,0,0,0.4);
            border-radius: 8px; border: 1px solid #2d4a6d; margin-left: 10px;
        }
        .qty-btn { width: 40px; height: 40px; border: none; background: none; color: var(--white); font-size: 1.5rem; cursor: pointer; }
        .qty-num { width: 30px; text-align: center; font-size: 1.1rem; font-weight: bold; color: var(--gold); }

        /* è¡¨å–®å€åŸŸ */
        .form-section { background: var(--card-bg); padding: 20px; border-radius: 12px; margin-top: 40px; border: 1px solid #2d4a6d; }
        
        .shipping-selector { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        .ship-opt {
            padding: 12px; text-align: center; background: #0a192f; border: 1px solid #2d4a6d;
            border-radius: 8px; cursor: pointer; font-size: 0.9rem; color: var(--text-sub);
        }
        .ship-opt.active { border-color: var(--gold); color: var(--gold); background: rgba(212, 175, 55, 0.1); }

        .form-group { margin-bottom: 18px; }
        label { display: block; margin-bottom: 8px; font-size: 0.85rem; color: var(--text-sub); font-weight: bold; }
        
        input, textarea, select { 
            width: 100%; padding: 14px; background: #0a192f; border: 1px solid #2d4a6d; 
            border-radius: 8px; color: var(--white); font-size: 1rem; box-sizing: border-box;
            outline: none; -webkit-appearance: none; font-family: inherit;
        }
        
        input[type="date"] {
            min-height: 50px;
            position: relative;
        }
        input[type="date"]::-webkit-calendar-picker-indicator {
            filter: invert(1);
            opacity: 0.5;
        }

        .notice-text { color: var(--white); font-size: 0.85rem; text-align: center; line-height: 1.6; margin: 25px 0; border: 1px dashed var(--sage); padding: 12px; border-radius: 8px; }

        #cart-display { background: rgba(0,0,0,0.2); padding: 15px; border-radius: 8px; margin-bottom: 15px; border: 1px solid #2d4a6d; }
        .discount-info { color: var(--sage); font-size: 0.85rem; text-align: right; margin-bottom: 5px; font-style: italic; }
        .total-box { font-size: 1.4rem; text-align: right; border-top: 1px solid #2d4a6d; padding-top: 15px; font-weight: bold; color: var(--gold); }

        .btn-row { display: grid; grid-template-columns: 1fr 2fr; gap: 12px; margin-top: 25px; }
        .btn { padding: 16px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 1rem; }
        .btn-clear { background: #2d4a6d; color: var(--text-sub); }
        .btn-copy { background: var(--gold); color: #051221; }
        .footer-note { text-align: center; font-size: 0.75rem; color: #486581; margin: 40px 0; }
    </style>
</head>
<body>

<div class="container">
    <h1>IG: nanzihan2020</h1>
    <div class="brand-sub">ç”·å­æ¼¢æ¼¬æ–™æœ¬èˆ–</div>

    <div id="product-list">
        <div class="category-title">ã€ HANDCRAFTED SAUCES | æ¼¬æ–™ç³»åˆ— ã€‘</div>
        <div class="product-row">
            <div class="product-info" onclick="changeQty('å‘³å™Œè¾£é†¬', 180, 1)">
                <span class="slogan">è¬èƒ½ç†Ÿé£Ÿä¼´ä¾¶</span>
                <span class="item-name">å‘³å™Œè¾£é†¬ (Spicy Miso Sauce)</span>
                <span class="price">$180</span>
            </div>
            <div class="qty-ctrl">
                <button class="qty-btn" onclick="changeQty('å‘³å™Œè¾£é†¬', 180, -1)">âˆ’</button>
                <div class="qty-num" id="qty-å‘³å™Œè¾£é†¬">0</div>
                <button class="qty-btn" onclick="changeQty('å‘³å™Œè¾£é†¬', 180, 1)">+</button>
            </div>
        </div>

        <div class="product-row">
            <div class="product-info" onclick="changeQty('å¹²è²é†¬', 300, 1)">
                <span class="slogan">çµ²çµ²æ¥µé®® ä¸€åŒ™å‡ç´š</span>
                <span class="item-name">å¹²è²é†¬ (Dried Scallop Sauce)</span>
                <span class="price">$300</span>
            </div>
            <div class="qty-ctrl">
                <button class="qty-btn" onclick="changeQty('å¹²è²é†¬', 300, -1)">âˆ’</button>
                <div class="qty-num" id="qty-å¹²è²é†¬">0</div>
                <button class="qty-btn" onclick="changeQty('å¹²è²é†¬', 300, 1)">+</button>
            </div>
        </div>

        <div class="product-row">
            <div class="product-info" onclick="changeQty('è”¥æ²¹é†¬', 120, 1)">
                <span class="slogan">å¾©åˆ»å®¶å‘³ æ‹Œéºµç¥å™¨</span>
                <span class="item-name">è”¥æ²¹é†¬ (Scallion Oil)</span>
                <span class="price">$120</span>
            </div>
            <div class="qty-ctrl">
                <button class="qty-btn" onclick="changeQty('è”¥æ²¹é†¬', 120, -1)">âˆ’</button>
                <div class="qty-num" id="qty-è”¥æ²¹é†¬">0</div>
                <button class="qty-btn" onclick="changeQty('è”¥æ²¹é†¬', 120, 1)">+</button>
            </div>
        </div>

        <div class="category-title">ã€ SIDE DISHES | ä½é¤ç³»åˆ— ã€‘</div>
        <div class="product-row">
            <div class="product-info" onclick="changeQty('é»ƒé‡‘æ³¡èœ', 200, 1)">
                <span class="slogan">éƒé‡‘ç†Ÿæˆ ä½é¤ç¥å™¨</span>
                <span class="item-name">é»ƒé‡‘æ³¡èœ (Golden Kimchi)</span>
                <span class="price">$200</span>
            </div>
            <div class="qty-ctrl">
                <button class="qty-btn" onclick="changeQty('é»ƒé‡‘æ³¡èœ', 200, -1)">âˆ’</button>
                <div class="qty-num" id="qty-é»ƒé‡‘æ³¡èœ">0</div>
                <button class="qty-btn" onclick="changeQty('é»ƒé‡‘æ³¡èœ', 200, 1)">+</button>
            </div>
        </div>

        <div class="product-row">
            <div class="product-info" onclick="changeQty('èŠ±é›•é†‰è¦', 380, 1)">
                <span class="slogan">ç§˜è£½å¾®é†º æ˜Ÿç´šå†·ç›¤</span>
                <span class="item-name">èŠ±é›•é†‰è¦ (Drunken Shrimp)</span>
                <span class="price">$380</span>
            </div>
            <div class="qty-ctrl">
                <button class="qty-btn" onclick="changeQty('èŠ±é›•é†‰è¦', 380, -1)">âˆ’</button>
                <div class="qty-num" id="qty-èŠ±é›•é†‰è¦">0</div>
                <button class="qty-btn" onclick="changeQty('èŠ±é›•é†‰è¦', 380, 1)">+</button>
            </div>
        </div>

        <div class="category-title">ã€ CRUNCHY SERIES | é…¥è„†ç³»åˆ— ã€‘</div>
        <div class="product-row">
            <div class="product-info" onclick="changeQty('ç³–éœœè…°æœ', 200, 1)">
                <span class="slogan">é›²æœµå¾®ç”œ è¼•ç›ˆåˆèŒ¶</span>
                <span class="item-name">ç³–éœœè…°æœ (Candied Cashews)</span>
                <span class="price">$200</span>
            </div>
            <div class="qty-ctrl">
                <button class="qty-btn" onclick="changeQty('ç³–éœœè…°æœ', 200, -1)">âˆ’</button>
                <div class="qty-num" id="qty-ç³–éœœè…°æœ">0</div>
                <button class="qty-btn" onclick="changeQty('ç³–éœœè…°æœ', 200, 1)">+</button>
            </div>
        </div>

        <div class="product-row">
            <div class="product-info" onclick="changeQty('æ¤’é¹½è…°æœ', 200, 1)">
                <span class="slogan">é¹¹é¦™å¸¶å‹ å¾®é†ºè‰¯ä¼´</span>
                <span class="item-name">æ¤’é¹½è…°æœ (Spiced Cashews)</span>
                <span class="price">$200</span>
            </div>
            <div class="qty-ctrl">
                <button class="qty-btn" onclick="changeQty('æ¤’é¹½è…°æœ', 200, -1)">âˆ’</button>
                <div class="qty-num" id="qty-æ¤’é¹½è…°æœ">0</div>
                <button class="qty-btn" onclick="changeQty('æ¤’é¹½è…°æœ', 200, 1)">+</button>
            </div>
        </div>

        <div class="product-row">
            <div class="product-info" onclick="changeQty('èœœæ±è…°æœ', 200, 1)">
                <span class="slogan">ç¥ç€æ™¶äº® èœœé¦™é…¥è„†</span>
                <span class="item-name">èœœæ±è…°æœ (Honey Roasted Cashews)</span>
                <span class="price">$200</span>
            </div>
            <div class="qty-ctrl">
                <button class="qty-btn" onclick="changeQty('èœœæ±è…°æœ', 200, -1)">âˆ’</button>
                <div class="qty-num" id="qty-èœœæ±è…°æœ">0</div>
                <button class="qty-btn" onclick="changeQty('èœœæ±è…°æœ', 200, 1)">+</button>
            </div>
        </div>

        <div class="category-title">ã€ ğŸ”¥ğŸ”¥ğŸ”¥ JUST NOW | ç¾åœ¨æ‰æœ‰ ğŸ”¥ğŸ”¥ğŸ”¥ ã€‘</div>
        <div class="product-row status-newyear">
            <div class="product-info">
                <span class="slogan">Qå½ˆé®®çˆ½ å¯¦æ–™æ»¿è¢‹</span>
                <span class="item-name">é‡ç£…æ»·é®‘é­š (Heavy-Pack Braised Abalone)</span>
                <span class="price">$xxx</span>
                <span class="limit-tag">æ–°å¹´é™å®š å³å°‡æ¨å‡º</span>
            </div>
        </div>
        <div class="product-row status-newyear">
            <div class="product-info">
                <span class="slogan">éª¨é…¥è‚‰å«© åŒ–å¢ƒä¹‹å‘³</span>
                <span class="item-name">ç¥ç€é…¥éª¨ç§‹åˆ€é­š (Velvet Bone Sanma)</span>
                <span class="price">$xxx</span>
                <span class="limit-tag">æ–°å¹´é™å®š å³å°‡æ¨å‡º</span>
            </div>
        </div>
        <div class="product-row status-gray">
            <div class="product-info">
                <span class="slogan">æ²ç”œåˆæˆ€ çˆ½å£æ¸…è„†</span>
                <span class="item-name">æƒ…äººæœ (Fruit of First Love)</span>
                <span class="price">$180</span>
                <span class="limit-tag">å¤å­£é™å®š æ•¬è«‹æœŸå¾…</span>
            </div>
        </div>
        <div class="product-row status-gray">
            <div class="product-info">
                <span class="slogan">ç››å¤è„†éŸ¿ è§£é¥è‰¯ä¼´</span>
                <span class="item-name">è„†æ¡ƒ (Sweet Pickled Peaches)</span>
                <span class="price">$200</span>
                <span class="limit-tag">å¤å­£é™å®š æ•¬è«‹æœŸå¾…</span>
            </div>
        </div>
    </div>

    <div class="form-section">
        <label>é…é€æ–¹å¼</label>
        <div class="shipping-selector">
            <div id="type-pickup" class="ship-opt active" onclick="setShip('é¢äº¤è‡ªå–', 0)">
                é¢äº¤è‡ªå–
                <span style="display:block; font-size:0.7rem; opacity:0.8;">(é™ä¸­å½°éƒ¨åˆ†åœ°å€)</span>
            </div>
            <div id="type-delivery" class="ship-opt" onclick="setShip('å†·è—å®…é…', 160)">
                å†·è—å®…é…
                <span style="display:block; font-size:0.7rem; opacity:0.8;">(é‹è²» $160)</span>
            </div>
        </div>

        <div class="form-group"><label>æ”¶ä»¶äººå§“å</label><input type="text" id="cust-name" placeholder="è«‹å¡«å¯«å§“å"></div>
        <div class="form-group"><label>é›»è©±</label><input type="tel" id="cust-phone" placeholder="è«‹å¡«å¯«é›»è©±"></div>
        <div class="form-group"><label>æ”¶ä»¶åœ°å€ / è‡ªå–åœ°é»</label><input type="text" id="cust-addr" placeholder="å®Œæ•´åœ°å€"></div>
        
        <div class="form-group" onclick="document.getElementById('cust-date').focus()">
            <label>å¸Œæœ›åˆ°è²¨æ—¥ (æœ€å¿«7å¤©å¾Œ)</label>
            <input type="date" id="cust-date">
        </div>

        <div class="form-group"><label>å‚™è¨»</label><textarea id="cust-note" rows="2" placeholder="å¦‚æœ‰å…¶ä»–éœ€æ±‚è«‹å¯«åœ¨é€™è£¡"></textarea></div>
        
        <div class="notice-text">
            âš ï¸ç‚ºæ±‚æ–°é®®ï¼Œè¦‹å–®ç”Ÿç”¢ï¼Œå°æœ¬ç¶“ç‡Ÿï¼Œè«‹å‹¿é‚£å€‹ï¼Œè¨‚å–®æˆç«‹å¾Œï¼Œè«‹å…ˆåŒ¯æ¬¾å“¦ â™¡âš ï¸
        </div>

        <div id="cart-display">å°šæœªé¸æ“‡å•†å“</div>
        <div id="discount-note" class="discount-info"></div>
        <div class="total-box">æ‡‰ä»˜ç¸½é¡ï¼š<span id="final-total">$0</span></div>

        <div class="btn-row">
            <button class="btn btn-clear" onclick="window.location.reload()">ä¸€éµæ¸…ç©º</button>
            <button class="btn btn-copy" onclick="copyOrder()">è¤‡è£½è¨‚å–®</button>
        </div>
    </div>

    <div class="footer-note">Â© nanzihan2020 ç”·å­æ¼¢æ¼¬æ–™æœ¬èˆ–</div>
</div>

<script>
    let cart = {};
    let shipMethod = 'é¢äº¤è‡ªå–';
    let shipFee = 0;

    (function initDate() {
        const dateInput = document.getElementById('cust-date');
        const future = new Date();
        future.setDate(future.getDate() + 7);
        const y = future.getFullYear();
        const m = String(future.getMonth() + 1).padStart(2, '0');
        const d = String(future.getDate()).padStart(2, '0');
        const minDate = `${y}-${m}-${d}`;
        dateInput.min = minDate;
        dateInput.value = minDate;
    })();

    function setShip(method, fee) {
        shipMethod = method;
        shipFee = fee;
        document.getElementById('type-pickup').className = (method === 'é¢äº¤è‡ªå–' ? 'ship-opt active' : 'ship-opt');
        document.getElementById('type-delivery').className = (method === 'å†·è—å®…é…' ? 'ship-opt active' : 'ship-opt');
        update();
    }

    function changeQty(name, price, delta) {
        if (!cart[name]) { cart[name] = { price: price, qty: 0 }; }
        cart[name].qty += delta;
        if (cart[name].qty < 0) cart[name].qty = 0;
        document.getElementById(`qty-${name}`).innerText = cart[name].qty;
        update();
    }

    function update() {
        let itemTotal = 0;
        let html = '';
        for (let key in cart) {
            if (cart[key].qty > 0) {
                itemTotal += cart[key].price * cart[key].qty;
                html += `<div>â–  ${key} x ${cart[key].qty}</div>`;
            }
        }
        document.getElementById('cart-display').innerHTML = html || 'å°šæœªé¸æ“‡å•†å“';

        let discountedTotal = itemTotal;
        let note = "";
        if (itemTotal >= 2000) {
            discountedTotal = Math.round(itemTotal * 0.9);
            note = `ç¬¦åˆæ»¿ $2000 äº« 9 æŠ˜ï¼(å·²æŠ˜ $${itemTotal - discountedTotal})`;
        } else if (itemTotal > 0) {
            note = `å†è²· $${2000 - itemTotal} äº«å…¨å–® 9 æŠ˜`;
        }
        
        document.getElementById('discount-note').innerText = note;
        document.getElementById('final-total').innerText = `$${discountedTotal + shipFee}`;
    }

    function copyOrder() {
        const name = document.getElementById('cust-name').value;
        const phone = document.getElementById('cust-phone').value;
        if (!name || !phone) { alert('è«‹å¡«å¯«å§“åèˆ‡é›»è©±'); return; }

        let itemsText = '';
        let itemTotal = 0;
        for (let key in cart) {
            if (cart[key].qty > 0) {
                itemsText += `â–  ${key} x ${cart[key].qty}\n`;
                itemTotal += cart[key].price * cart[key].qty;
            }
        }
        if (itemTotal === 0) { alert('å°šæœªé¸è³¼å•†å“'); return; }

        let finalItemTotal = (itemTotal >= 2000) ? Math.round(itemTotal * 0.9) : itemTotal;
        let discLog = (itemTotal >= 2000) ? `(æ»¿é¡æŠ˜æ‰£ 9 æŠ˜ï¼š- $${itemTotal - finalItemTotal})\n` : "";

        const msg = `ã€ ç”·å­æ¼¢æ¼¬æ–™æœ¬èˆ– è¨‚å–® ã€‘\n` +
                    `--------------------------\n` +
                    `${itemsText}` +
                    `--------------------------\n` +
                    `é…é€æ–¹å¼ï¼š${shipMethod}\n` +
                    `å•†å“å°è¨ˆï¼š$${itemTotal}\n` +
                    `${discLog}` +
                    `é‹è²»ç¸½è¨ˆï¼š$${shipFee}\n` +
                    `æ‡‰ä»˜ç¸½é¡ï¼š$${finalItemTotal + shipFee}\n\n` +
                    `æ”¶ä»¶äººï¼š${name}\n` +
                    `é›»è©±ï¼š${phone}\n` +
                    `åœ°å€ï¼š${document.getElementById('cust-addr').value}\n` +
                    `åˆ°è²¨æ—¥ï¼š${document.getElementById('cust-date').value}\n` +
                    `å‚™è¨»ï¼š${document.getElementById('cust-note').value || 'ç„¡'}\n\n` +
                    `âš ï¸ ç¶“å¸¥è€é—†å›è¦†ç¢ºèªè¨‚å–®æˆç«‹å¾Œï¼Œè«‹å…ˆåŒ¯æ¬¾å“¦ â™¡`;

        const textArea = document.createElement("textarea");
        textArea.value = msg;
        document.body.appendChild(textArea);
        textArea.select();
        try {
            document.execCommand('copy');
            alert('è¨‚å–®å…§å®¹å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿,è«‹ç§è¨ŠIGæˆ–LINEè²¼çµ¦è€é—†ï¼');
        } catch (err) {
            alert('è¤‡è£½å¤±æ•—ï¼Œè«‹æ‰‹å‹•é¸å–');
        }
        document.body.removeChild(textArea);
    }
</script>

</body>
</html>